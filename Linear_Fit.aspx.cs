using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Script.Serialization;
using System.Web.UI;

namespace YourNamespace
{
    public partial class Linear_Fit : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                GenerateAndSetChartData();
            }
        }

        private void GenerateAndSetChartData()
        {
            var years = new List<string>();
            for (var i = 2002; i <= 2024; i++) // Loop until 2024
            {
                for (var month = 1; month <= 12; month++)
                {
                    years.Add($"{i}-{month.ToString().PadLeft(2, '0')}");
                }
            }

           
            var originalGDPData = new List<double>
            {
                13.6, 13.6, 18.6, 18.4, 16.6, 18.9, 10.6, 15.8, 16.6, 15.2, 12.1, 11.4,
                13.4, 17, 17.9, 15.9, 11.1, 14.5, 14.7, 9.6, 12.6, 11.2, 12.9, 12.6,
                14.7, 16.8, 16.7, 13.1, 10.8, 16.4, 13.4, 14.5, 6.6, 15.2, 17.4, 17.7,
                14.5, 13.3, 17.5, 15.9, 15, 11.8, 13.8, 16.6, 9.4, 14.5, 12.7, 11.4, 15,
                12.6, 19.9, 17.4, 10.1, 12.3, 17.1, 14.2, 15.2, 13.1, 16.7, 8.7, 17.2, 17,
                17.7, 12.1, 13.4, 15.8, 17.7, 16.8, 16.8, 15.9, 16.3, 17.7, 15.8, 8.4, 7.6,
                15.2, 14.7, 11.6, 19, 16.5, 11.3, 18.6, 19.3, 16.8, 9.2, 18.9, 14.6, 12.7,
                11, 11.8, 18.1, 17, 13.3, 14.2, 12.8, 17.3, 14.7, 10.3, 14.7, 16, 14.3, 13,
                19.9, 13.9, 14.8, 14, 15.5, 10.8, 14, 12.8, 11.9, 13.1, 12.5, 11.3, 14.8,
                11.8, 12.1, 12.9, 14.5, 9.7, 14.9, 8.3, 18, 18.2, 15.4, 10.5, 18.5, 12.4,
                18.1, 13.5, 14.5, 13.2, 13.8, 15.6, 16.3, 15.7, 13.6, 12.8, 11.5, 12.4,
                13.1, 12.9 
            };

           
            var predictedGDPData = new List<double>
            {
                14.51945, 12.10226, 17.91878, 16.58709, 15.86461, 18.92797, 9.746305,
                14.00848, 16.37627, 15.26994, 11.82897, 12.6494, 11.83124, 16.64559,
                18.68253, 14.74798, 12.79253, 14.79926, 14.38476, 10.33596, 12.60466,
                11.25205, 12.25272, 13.39772, 14.81998, 18.78996, 16.98152, 12.75341,
                11.05034, 15.77549, 12.17106, 14.07127, 7.55844, 14.86652, 17.43421,
                17.84274, 14.76608, 13.08433, 16.35789, 14.55478, 14.78131, 11.64436,
                13.8772, 15.78573, 10.09278, 13.67913, 14.52506, 10.79536, 15.32863,
                12.23674, 19.17625, 18.94555, 8.937632, 11.75064, 16.10236, 14.09339,
                14.94492, 12.69338, 16.21682, 8.29559, 17.25858, 16.7945, 17.78498,
                12.4798, 12.9204, 15.5827, 17.35386, 16.9222, 16.82798, 15.06674,
                14.928, 17.89105, 15.85163, 9.623831, 6.805565, 15.02061, 13.91212,
                13.29861, 18.96193, 17.36711, 10.99635, 17.16277, 14.12157, 19.05429,
                15.85449, 9.279879, 17.39794, 14.96935, 12.84624, 10.41783, 12.3153,
                17.60668, 16.76734, 11.97087, 13.76305, 13.55075, 17.41294, 13.61719,
                11.13823, 14.31818, 15.39858, 15.10377, 13.56235, 19.44814, 13.82499,
                15.19575, 14.92501, 17.01093, 11.15168, 14.77581, 12.57528, 11.19175,
                12.46973, 13.53977, 12.23336, 14.46053, 11.06818, 12.89238, 13.30917,
                15.42512, 9.182471, 13.65908, 7.151109, 17.82275, 17.63476, 15.46172,
                10.15426, 19.29562, 12.7957, 17.83413, 13.77197, 13.79668 
            };

            var chartData = new
            {
                data = new[]
                {
                    new
                    {
                        x = years,
                        y = originalGDPData,
                        type = "scatter",
                        mode = "lines+markers",
                        name = "Original GDP",
                        line = new { color = "blue" }
                    },
                    new
                    {
                        x = years,
                        y = predictedGDPData,
                        type = "scatter",
                        mode = "lines+markers",
                        name = "Predicted GDP",
                        line = new { color = "red" }
                    }
                },
                layout = new
                {
                    title = "US GDP Data Visualization",
                    xaxis = new
                    {
                        title = "Year",
                        tickmode = "array",
                        tickvals = new List<string> { "2006", "2011", "2016", "2021", "2024" },
                        ticktext = new List<string> { "2006", "2011", "2016", "2021", "2024" }
                    },
                    yaxis = new { title = "GDP in Billions of Dollars" }
                }

            };

            var serializer = new JavaScriptSerializer();
            hfChartData.Value = serializer.Serialize(chartData);
        }
    }
}
